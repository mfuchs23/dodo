<html><head><script language="JavaScript" src="extensions_files/script.js" type="text/javascript"></script><title>Xalan-Java Extensions</title></head><body alink="#ff0000" bgcolor="#ffffff" leftmargin="4" link="#0000ff" marginheight="4" marginwidth="4" text="#000000" topmargin="4" vlink="#0000aa"><table border="0" cellpadding="0" cellspacing="0" width="620"><tbody><tr><td align="left" height="60" rowspan="3" valign="top" width="135"><img border="0" height="60" hspace="0" src="extensions_files/logo.gif" vspace="0" width="135"></td><td align="left" colspan="4" height="5" valign="top" width="456"><img border="0" height="5" hspace="0" src="extensions_files/line.gif" vspace="0" width="456"></td><td align="left" height="60" rowspan="3" valign="top" width="29"><img border="0" height="60" hspace="0" src="extensions_files/right.gif" vspace="0" width="29"></td></tr><tr><td align="left" bgcolor="#0086b2" colspan="4" height="35" valign="top" width="456"><img alt="" border="0" height="35" hspace="0" src="extensions_files/extensions-header.jpg" vspace="0" width="456"></td></tr><tr><td align="left" height="20" valign="top" width="168"><img border="0" height="20" hspace="0" src="extensions_files/bottom.gif" vspace="0" width="168"></td><td align="left" height="20" valign="top" width="96"><a href="http://xml.apache.org/" onmouseout="rolloverOff('xml');" onmouseover="rolloverOn('xml');" target="new"><img alt="http://xml.apache.org/" border="0" height="20" hspace="0" name="xml" onload="rolloverLoad('xml','resources/button-xml-hi.gif','resources/button-xml-lo.gif');" src="extensions_files/button-xml-lo.gif" vspace="0" width="96"></a></td><td align="left" height="20" valign="top" width="96"><a href="http://www.apache.org/" onmouseout="rolloverOff('asf');" onmouseover="rolloverOn('asf');" target="new"><img alt="http://www.apache.org/" border="0" height="20" hspace="0" name="asf" onload="rolloverLoad('asf','resources/button-asf-hi.gif','resources/button-asf-lo.gif');" src="extensions_files/button-asf-lo.gif" vspace="0" width="96"></a></td><td align="left" height="20" valign="top" width="96"><a href="http://www.w3.org/" onmouseout="rolloverOff('w3c');" onmouseover="rolloverOn('w3c');" target="new"><img alt="http://www.w3.org/" border="0" height="20" hspace="0" name="w3c" onload="rolloverLoad('w3c','resources/button-w3c-hi.gif','resources/button-w3c-lo.gif');" src="extensions_files/button-w3c-lo.gif" vspace="0" width="96"></a></td></tr></tbody></table><table border="0" cellpadding="0" cellspacing="0" width="620"><tbody><tr><td align="left" valign="top" width="120"><img border="0" height="14" hspace="0" src="extensions_files/join.gif" vspace="0" width="120"><br>
  
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/whatsnew.html" onmouseout="rolloverOff('side-whatsnew');" onmouseover="rolloverOn('side-whatsnew');"><img alt="What's New" border="0" height="12" hspace="0" name="side-whatsnew" onload="rolloverLoad('side-whatsnew','graphics/whatsnew-label-2.jpg','graphics/whatsnew-label-3.jpg');" src="extensions_files/whatsnew-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/dtm.html" onmouseout="rolloverOff('side-dtm');" onmouseover="rolloverOn('side-dtm');"><img alt="DTM" border="0" height="12" hspace="0" name="side-dtm" onload="rolloverLoad('side-dtm','graphics/dtm-label-2.jpg','graphics/dtm-label-3.jpg');" src="extensions_files/dtm-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/xsltc_usage.html" onmouseout="rolloverOff('side-xsltc_usage');" onmouseover="rolloverOn('side-xsltc_usage');"><img alt="XSLTC Translets" border="0" height="12" hspace="0" name="side-xsltc_usage" onload="rolloverLoad('side-xsltc_usage','graphics/xsltc_usage-label-2.jpg','graphics/xsltc_usage-label-3.jpg');" src="extensions_files/xsltc_usage-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/overview.html" onmouseout="rolloverOff('side-overview');" onmouseover="rolloverOn('side-overview');"><img alt="Overview" border="0" height="12" hspace="0" name="side-overview" onload="rolloverLoad('side-overview','graphics/overview-label-2.jpg','graphics/overview-label-3.jpg');" src="extensions_files/overview-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/getstarted.html" onmouseout="rolloverOff('side-getstarted');" onmouseover="rolloverOn('side-getstarted');"><img alt="Getting Started" border="0" height="12" hspace="0" name="side-getstarted" onload="rolloverLoad('side-getstarted','graphics/getstarted-label-2.jpg','graphics/getstarted-label-3.jpg');" src="extensions_files/getstarted-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/faq.html" onmouseout="rolloverOff('side-faq');" onmouseover="rolloverOn('side-faq');"><img alt="FAQs" border="0" height="12" hspace="0" name="side-faq" onload="rolloverLoad('side-faq','graphics/faq-label-2.jpg','graphics/faq-label-3.jpg');" src="extensions_files/faq-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/samples.html" onmouseout="rolloverOff('side-samples');" onmouseover="rolloverOn('side-samples');"><img alt="Sample Apps" border="0" height="12" hspace="0" name="side-samples" onload="rolloverLoad('side-samples','graphics/samples-label-2.jpg','graphics/samples-label-3.jpg');" src="extensions_files/samples-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/commandline.html" onmouseout="rolloverOff('side-commandline');" onmouseover="rolloverOn('side-commandline');"><img alt="Command Line" border="0" height="12" hspace="0" name="side-commandline" onload="rolloverLoad('side-commandline','graphics/commandline-label-2.jpg','graphics/commandline-label-3.jpg');" src="extensions_files/commandline-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/usagepatterns.html" onmouseout="rolloverOff('side-usagepatterns');" onmouseover="rolloverOn('side-usagepatterns');"><img alt="Usage Patterns" border="0" height="12" hspace="0" name="side-usagepatterns" onload="rolloverLoad('side-usagepatterns','graphics/usagepatterns-label-2.jpg','graphics/usagepatterns-label-3.jpg');" src="extensions_files/usagepatterns-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/features.html" onmouseout="rolloverOff('side-features');" onmouseover="rolloverOn('side-features');"><img alt="Features" border="0" height="12" hspace="0" name="side-features" onload="rolloverLoad('side-features','graphics/features-label-2.jpg','graphics/features-label-3.jpg');" src="extensions_files/features-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/trax.html" onmouseout="rolloverOff('side-trax');" onmouseover="rolloverOn('side-trax');"><img alt="TrAX" border="0" height="12" hspace="0" name="side-trax" onload="rolloverLoad('side-trax','graphics/trax-label-2.jpg','graphics/trax-label-3.jpg');" src="extensions_files/trax-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/apidocs/index.html" onmouseout="rolloverOff('side-ext-36');" onmouseover="rolloverOn('side-ext-36');"><img alt="API (Javadoc)" border="0" height="12" hspace="0" name="side-ext-36" onload="rolloverLoad('side-ext-36','graphics/ext-36-label-2.jpg','graphics/ext-36-label-3.jpg');" src="extensions_files/ext-36-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <img alt="Extensions" border="0" height="12" hspace="0" src="extensions_files/extensions-label-1.jpg" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/extensionslib.html" onmouseout="rolloverOff('side-extensionslib');" onmouseover="rolloverOn('side-extensionslib');"><img alt="Extensions Library" border="0" height="12" hspace="0" name="side-extensionslib" onload="rolloverLoad('side-extensionslib','graphics/extensionslib-label-2.jpg','graphics/extensionslib-label-3.jpg');" src="extensions_files/extensionslib-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/readme.html" onmouseout="rolloverOff('side-readme');" onmouseover="rolloverOn('side-readme');"><img alt="Release Notes" border="0" height="12" hspace="0" name="side-readme" onload="rolloverLoad('side-readme','graphics/readme-label-2.jpg','graphics/readme-label-3.jpg');" src="extensions_files/readme-label-3.jpg" vspace="0" width="120"></a><br>
  
  
  
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/design/design2_0_0.html" onmouseout="rolloverOff('side-ext-56');" onmouseover="rolloverOn('side-ext-56');"><img alt="Xalan 2 Design" border="0" height="12" hspace="0" name="side-ext-56" onload="rolloverLoad('side-ext-56','graphics/ext-56-label-2.jpg','graphics/ext-56-label-3.jpg');" src="extensions_files/ext-56-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/xsltc/index.html" onmouseout="rolloverOff('side-ext-58');" onmouseover="rolloverOn('side-ext-58');"><img alt="XSLTC Design" border="0" height="12" hspace="0" name="side-ext-58" onload="rolloverLoad('side-ext-58','graphics/ext-58-label-2.jpg','graphics/ext-58-label-3.jpg');" src="extensions_files/ext-58-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/readme.html#bugs" onmouseout="rolloverOff('side-ext-62');" onmouseover="rolloverOn('side-ext-62');"><img alt="Bugs" border="0" height="12" hspace="0" name="side-ext-62" onload="rolloverLoad('side-ext-62','graphics/ext-62-label-2.jpg','graphics/ext-62-label-3.jpg');" src="extensions_files/ext-62-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="http://xml.apache.org/xalan-j/test/overview.html" onmouseout="rolloverOff('side-ext-64');" onmouseover="rolloverOn('side-ext-64');"><img alt="Testing" border="0" height="12" hspace="0" name="side-ext-64" onload="rolloverLoad('side-ext-64','graphics/ext-64-label-2.jpg','graphics/ext-64-label-3.jpg');" src="extensions_files/ext-64-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/builds.html" onmouseout="rolloverOff('side-builds');" onmouseover="rolloverOn('side-builds');"><img alt="Builds" border="0" height="12" hspace="0" name="side-builds" onload="rolloverLoad('side-builds','graphics/builds-label-2.jpg','graphics/builds-label-3.jpg');" src="extensions_files/builds-label-3.jpg" vspace="0" width="120"></a><br>
  <img border="0" height="6" hspace="0" src="extensions_files/separator.gif" vspace="0" width="120"><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/readme.html#developer-list" onmouseout="rolloverOff('side-ext-70');" onmouseover="rolloverOn('side-ext-70');"><img alt="Credits" border="0" height="12" hspace="0" name="side-ext-70" onload="rolloverLoad('side-ext-70','graphics/ext-70-label-2.jpg','graphics/ext-70-label-3.jpg');" src="extensions_files/ext-70-label-3.jpg" vspace="0" width="120"></a><br>
  <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/xsltc/todo.html#developer-list" onmouseout="rolloverOff('side-ext-72');" onmouseover="rolloverOn('side-ext-72');"><img alt="XSLTC Credits" border="0" height="12" hspace="0" name="side-ext-72" onload="rolloverLoad('side-ext-72','graphics/ext-72-label-2.jpg','graphics/ext-72-label-3.jpg');" src="extensions_files/ext-72-label-3.jpg" vspace="0" width="120"></a><br>  
<img border="0" height="14" hspace="0" src="extensions_files/close.gif" vspace="0" width="120"><br></td><td align="left" valign="top" width="500"><table border="0" cellpadding="3" cellspacing="0"><tbody><tr><td>
<ul>
<li><a href="#intro">Introduction</a></li>
<li><a href="#supported-lang">Supported languages</a></li>
<li><a href="#basic-pattern">The basic pattern</a></li>
<li><a href="#setup-runtime">Setting up the runtime environment</a></li>
<li><a href="#basic-syntax">Syntax</a></li>
<li><a href="#ext-elements">Using an extension element</a></li>
<li><a href="#ext-functions">Using extension functions</a></li>
<li><a href="#java-namespace">Alternative: using the abbreviated syntax for extensions implemented in Java</a></li>
<li>Examples: <a href="#ex-basic">basic JavaScript example</a>, <a href="#ex-java-namespace">using the java namespace</a>, <a href="#ex-java">using a Java Hashtable</a>, <a href="#ex-javascript">using a JavaScript array</a></li>
</ul><a name="intro"><!--anchor--></a>
  <table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Introduction</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
  <p>For
those situations where you would like to augment the functionality of
XSLT with calls to a procedural language, Xalan-Java supports the
creation and use of extension elements and extension functions.
Xalan-Java also provides a growing <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/extensionslib.html">extensions library</a>
available for your use. An extension (a collection of elements and
functions) inhabits a namespace, either a namespace you declare and
designate as an extensions namespace, or one of the predefined
namespaces that Xalan-Java provides. For information about XML
namespaces, see <a href="http://www.w3.org/TR/REC-xml-names/">Namespaces in XML</a>.</p>

<p><b>Extension elements:</b> Unlike a literal result element, which
the stylesheet simply transfers to the result tree, an extension
element performs an action. For example, you can use the Redirect
extension elements shipped with Xalan-Java to redirect portions of your
transformation output to one or more files. Extension elements may
contain attributes, text nodes, other elements, basically any valid
XML. Extension elements may perform quite sophisticated actions, given
that the extension routine (the implementation) has direct access to
the XSLT processor context object and to the element. In many cases the
implementation returns void or null; if it does return a value, that
value is placed in the transformation result tree.</p>

<p><b>Extension functions:</b> You can think of extension functions as
extending the core library of functions that XPath provides. An
extension function passes arguments to the extension implementation and
returns a value. You can use extension functions to return values that
XSLT can interact with directly (node-set, result tree fragment,
string, boolean, and number) as well as values (of any type) that you
pass in turn to other extension functions. Extension functions written
in Java can also access certain items in the XSLT execution environment
through an <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/apidocs/org/apache/xalan/extensions/ExpressionContext.html">ExpressionContext</a> interface.</p>

<p>XSLT extensions are specified in the <a href="http://www.w3.org/TR/xslt#extension">XSLT Recommendation</a>.
This document focuses on the Xalan-Java implementation of those
requirements, not on XSLT extensions in general. For additional
information on extensions, consult the Recommendation or the other
resources listed in <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/overview.html#uptospeed">Getting up to speed with XSLT</a>.</p>
</font></td></tr></tbody></table><br><a name="supported-lang"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Supported languages</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
</font><p><font color="#000000" face="arial,helvetica,sanserif">Extensions
written in Java are directly supported by Xalan-Java. For extensions
written in languages other than Java, Xalan-Java uses the <a href="http://oss.software.ibm.com/developerworks/projects/bsf" target="_top">Bean Scripting Framework (BSF)</a>,
an architecture for incorporating scripting into Java applications and
applets. BSF allows an application to take advantage of scripting while
being independent of any specific scripting language. To date, we have
tested extensions implemented in JavaScript. Other languages with BSF
support appear in the table below.</font></p>
<p><font color="#000000" face="arial,helvetica,sanserif">BSF requires
bsf.jar on the classpath. This JAR file is shipped with Xalan-Java and
is required only if you have extensions written in languages other than
Java. The additional JAR files or DLLs required to support extensions
written in other languages are listed in the table below. These files
are available from the sources indicated and are not shipped with
Xalan-Java.</font></p>
<table border="0" cellpadding="2" cellspacing="2" width="100%">
  <tbody><tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><b>Language</b> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><b>Version</b> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><b>Requirements</b> 
      </font></td>
  </tr>
  <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Mozilla Rhino (JavaScript)<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">1.5<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">js.jar available from 
				    http://www.mozilla.org/rhino<br><br> 
      </font></td>
  </tr>
  <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">NetRexx<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">1.148 up <br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">NetRexxC.zip available from http://www2.hursley.ibm.com/netrexx<br><br> 
      </font></td>
  </tr>
    <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">BML<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">2.4<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">bmlall.jar available from http://oss.software.ibm.com/developerworks/projects/bsf<br><br> 
      </font></td>
  </tr>
    <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">JPython<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">1.1-beta3<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">python.jar available from http://www.jpython.org/<br><br> 
      </font></td>
  </tr>
    <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Jacl<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">1.1.1<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"> jacl.jar and tcljava.jar from http://www.scriptics.com/java<br><br> 
      </font></td>
  </tr>
    <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Win32 ActiveScript langs
	JScript, VBScript<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">MSVCP60.DLL from Microsoft, appropriate language DLLs from Microsoft 
    http://msdn.microsoft.com/scripting<br><br> 
      </font></td>
  </tr>
    <tr>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">PerlScript<br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><br><br> 
      </font></td>
    <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">ActivePerl from http://www.activestate.com/<br><br> 
      </font></td>
  </tr>  
</tbody></table>
</td></tr></tbody></table><br><a name="basic-pattern"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>The basic pattern</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
<p>Let's examine a simple example. The stylesheet below uses an
extension element and an extension function to transform an element in
the XML source into a statement in the output indicating the date by
which a customer can expect a response to a given enquiry.</p>

<p>The source element contains a numdays attribute. The extension
element contains a multiplier attribute, which is used to set a
variable in the extension. The extension function computes the
deadline, that is the current date plus numdays * multiplier. So for
&lt;deadline numdays="3"/&gt; (in the XML source) and
&lt;my-ext:timelapse multiplier="2"/&gt; (in the stylesheet), the
extension computes a deadline 6 days from now, and the stylesheet
template transforms the deadline element into a string along the lines
of <code><font face="courier, monospaced">&lt;p&gt;We have logged your enquiry and will respond by April 29, 2000 12:07:16 PM EST.&lt;/p&gt;</font></code></p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>The
extension function could include both numdays and multiplier as
arguments, thus bypassing the need for the extension element, but the
purpose here is to illustrate the usage pattern for extension elements.</i></font></td></tr></tbody></table>
<p>As you review this stylesheet, please note the following:</p>
<ol>
	  <li>The declaration of the xalan namespace, which provides support for the component and
     component/script elements:<br><br>
    <code><font face="courier, monospaced">xmlns:xalan="http://xml.apache.org/xalan"</font></code><br><br></li>
    <li>The declaration of a namespace for this extension:<br><br>
    <code><font face="courier, monospaced">xmlns:my-ext="ext1"</font></code><br><br></li>
  	<li>The
designation of this namespace prefix as an extension prefix. This
causes any element in the namespace associated with this prefix to be
treated as an extension element rather than a literal result element.<br><br>
     <code><font face="courier, monospaced">extension-element-prefixes="my-ext"</font></code><br><br></li>
	  <li>The xalan:component with attributes designating the namespace prefix and the elements and
     functions this extension provides.<br><br></li>
  	<li>The xalan:script subelement with a JavaScript implementation of the extension. For Java
     extensions, the xalan:script element has a src attribute that you set to identify the Java class.</li>
</ol><a name="ex-basic"><!--anchor--></a>   
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;?xml version="1.0"?&gt;
&lt;!--Namespaces are global if you set them in the stylesheet element--&gt;
&lt;xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0"   
    xmlns:xalan="http://xml.apache.org/xalan"
    xmlns:my-ext="ext1"
    extension-element-prefixes="my-ext"&gt;
    
  &lt;!--The component and its script are in the xalan namespace and define the 
    implementation of the extension.--&gt;
  &lt;xalan:component prefix="my-ext" elements="timelapse" functions="getdate"&gt;
    &lt;xalan:script lang="javascript"&gt;
      var multiplier=1;
      // The methods or functions that implement extension elements always take 2
      // arguments. The first argument is the XSL Processor context; the second 
      // argument is the element node.
      function timelapse(xslProcessorContext, elem)
      {
        multiplier=parseInt(elem.getAttribute("multiplier"));
        // The element return value is placed in the result tree.
        // If you do not want a return value, return null.
        return null;
      }
      function getdate(numdays)
      {
        var d = new Date();
        var totalDays = parseInt(numdays) * multiplier;
        d.setDate(d.getDate() + totalDays);
        return d.toLocaleString();
      }
    &lt;/xalan:script&gt;
  &lt;/xalan:component&gt;
      
  &lt;xsl:template match="deadline"&gt;
    &lt;p&gt;&lt;my-ext:timelapse multiplier="2"/&gt;We have logged your enquiry and will 
      respond by &lt;xsl:value-of select="my-ext:getdate(string(@numdays))"/&gt;.&lt;/p&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
</font></td></tr></tbody></table><br><a name="setup-runtime"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Setting up the runtime environment</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
<p>To run the preceding example, bsf.jar and js.jar must be on the
classpath. Remember that bsf.jar must be on the classpath to run any
extension written in a language other than Java. For extensions
implemented in a scripting language, see the additional requirements in
<a href="#supported-lang">Supported languages</a>.</p>
</font></td></tr></tbody></table><br><a name="basic-syntax"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Syntax</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
</font><p><font color="#000000" face="arial,helvetica,sanserif">You can
always use the pattern illustrated above to set up and use extension
elements and extension functions. For extension elements and functions
implemented in Java, you can also use an abbreviated syntax, described
in <a href="#java-namespace">Alternative: using the abbreviated syntax for extensions implemented in Java</a>. Unless you are using the abbreviated syntax, do the following:</font></p>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>1. Declare the xalan namespace</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br><code><font face="courier, monospaced">xmlns:xalan="http://xml.apache.org/xalan"</font></code></p>
<p>The xalan namespace provides support for the xalan:component element and xalan:script subelement.</p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>The old namespace http://xml.apache.org/xslt is still supported for backward compatibility.</i></font></td></tr></tbody></table>
</font></td></tr></tbody></table><font color="#000000" face="arial,helvetica,sanserif"><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>2. Declare a unique namespace for each extension prefix</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br><code><font face="courier, monospaced">xmlns:<i>prefix</i>=<i>URI</i></font></code></p>
<p>The <i>prefix</i> identifies the namespace, and <i>URI</i> is an
arbitrary (but unique) string that matches the value of the prefix
attribute of an xalan:component element in the stylesheet.<br>
Example: <code><font face="courier, monospaced">xmlns:ext1="xyz"</font></code><br><br></p>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>3. If you are using extension elements, designate the extension element prefixes</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br>This step is required only if you are using extension elements.
If you are using extension functions only, you can skip this step.</p>
<p>In the stylesheet element, write:</p> 
<p><code><font face="courier, monospaced">extension-element-prefixes="<i>prefix-1 prefix-2 ...</i>"</font></code></p>
<p>In a literal result element or extension element include the xsl prefix:</p>
<p><code><font face="courier, monospaced">xsl:extension-element-prefixes="<i>prefix1 prefix2 ...</i>"</font></code></p>
<p>Keep in mind that where you declare namespaces and designate
extension prefixes determines the scope of those namespaces.To make
your extensions available throughout the stylesheet, include these
settings and attribute in the stylesheet element.</p>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>4. (Optional) Exclude the extension namespace declaration from the result tree</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br>By default, namespace declarations are included in the transformation output. To exclude namespaces from the output, use</p>
<p><code><font face="courier, monospaced">exclude-result-prefixes="<i>prefix-1 prefix-2 ...</i>"</font></code></p>
<p>in the stylesheet element or</p>
<p><code><font face="courier, monospaced">xsl:exclude-result-prefixes="<i>prefix-1 prefix-2 ...</i>"</font></code></p> 
<p>in a literal result element or extension element.</p>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>5. Set up an xalan:component</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br>In the scope of the xalan namespace declaration:</p>
<p><code><font face="courier, monospaced">&lt;xalan:component prefix="<i>prefix</i>" </font></code><br>
   <code><font face="courier, monospaced">    functions="<i>func-1 func-2 ...func-n</i>"</font></code><br> 
   <code><font face="courier, monospaced">    elements="<i>elem-1 elem-2 ...elem-n</i>"&gt;</font></code><br>
   <code><font face="courier, monospaced">  &lt;!--See xalan:script below--&gt;</font></code><br>
   <code><font face="courier, monospaced">&lt;/xalan:component&gt;</font></code></p>
<p>where <i>func-1 func-2 ... func-n</i> and <i>elem-1 elem-2 ... elem-n</i>
designate the functions and elements the extension provides and the
stylesheet uses. You can use the function-available and
element-available functions to determine at run time whether a function
or element designated in the xalan:component is actually available.</p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>If
the component is implemented in Java, the values of the functions and
elements attributes are ignored. The function-available and
element-available functions use reflection to examine the actual Java
methods.</i></font></td></tr></tbody></table>
</font></td></tr></tbody></table><br>
<a name="setup-script"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>6. Set up the xalan:script element</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br>In each xalan:component, you must include exactly one xalan:script element. If the extension is implemented in JavaScript:</p>
<p><code><font face="courier, monospaced">&lt;xalan:script lang="javascript" &gt;</font></code><br>
<code><font face="courier, monospaced">  &lt;!--The implementation script--&gt;</font></code><br>
<code><font face="courier, monospaced">&lt;/xalan:script&gt;</font></code></p>
<p>For other scripting languages supported by BSF, use the same
approach as for JavaScript. Xalan-Java plans to add support for using
the src attribute to identify another document that contains the
implementation script; this feature is not yet supported.</p>
<p>If the extension is implemented in Java, you have three choices for the format of the src attribute in the xalan:script element.</p>
<p><code><font face="courier, monospaced">&lt;xalan:script lang="javaclass" src="xalan://<i>FQCN</i>"/&gt;</font></code>
<br>where <i>FQCN</i> is the fully qualified class name.
<br>Example: <code><font face="courier, monospaced">&lt;xalan:script lang="javaclass" src="xalan://java.util.Hashtable"/&gt;</font></code></p>
<p><code><font face="courier, monospaced">&lt;xalan:script lang="javaclass" src="xalan://<i>PJPN</i>"/&gt;</font></code>
<br>where <i>PJPN</i> is the beginning of or the complete name of a java package.
<br>Example: <code><font face="courier, monospaced">&lt;xalan:script lang="javaclass" src="java.util"/&gt;</font></code></p>
<p><code><font face="courier, monospaced">&lt;xalan:script lang="javaclass" src="http://xml.apache.org/xalan/java"/&gt;</font></code></p>
<p>The different formats for the value of the src attribute when using Java extensions are more fully explained in <a href="#java-namespace-declare">Declare the namespace</a>.</p>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Implicit DTD for xalan:component</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;!ELEMENT xalan:component (xalan:script)&gt;
&lt;!ATTLIST xalan:component
  prefix CDATA #REQUIRED
  elements NMTOKENS #IMPLIED
  functions NMTOKENS #IMPLIED&gt;

&lt;!ELEMENT xalan:script (#PCDATA | EMPTY)?&gt;
&lt;!ATTLIST xalan:script
  lang CDATA #REQUIRED
  src CDATA #IMPLIED&gt;</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
</font></td></tr></tbody></table><br>
</font></td></tr></tbody></table><br><a name="ext-elements"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Using an extension element</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
<p>Extension elements pass the extension two objects:</p>
<ul>
<li><a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/apidocs/org/apache/xalan/extensions/XSLProcessorContext.html">org.apache.xalan.extensions.XSLProcessorContext</a>,
which provides access to the XSL processor, the XML source tree, the
stylesheet tree, the current context node, and the current mode (if
any).<br><br></li>
<li><a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/apidocs/org/apache/xalan/templates/ElemExtensionCall.html">org.apache.xalan.templates.ElemExtensionCall</a>, which provides the API for interacting with the extension element.</li>
</ul>
<p>You can use the ElemExtensionCall getAttribute(String name) method,
for example, to read element attributes in their raw form. Use the
getAttribute(String name, Node sourceNode, XSLTEngineImpl processor)
method to evaluate the attribute as an attribute value template. Note
that the method names are the same but the method signatures are
different. For full details, see the <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/apidocs/org/apache/xalan/templates/ElemExtensionCall.html">Javadoc</a> for the ElemExtensionCall class.</p>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Implementing an extension element</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>For each extension element in a namespace, the implementation must
be a Java method with the following signature, or the scripting
language equivalent:</p>
<p><code><font face="courier, monospaced"><i>Type element</i>(org.apache.xalan.extensions.XSLProcessorContext, </font></code><br>
<code><font face="courier, monospaced">             org.apache.xalan.templates.ElemExtensionCall extensionElement)</font></code></p>
<p>where <i>Type</i> designates the return type and <i>element</i> is
the local part of the extension element name (the element name without
the namespace prefix). In the method signature, you may also use
superclasses of the indicated types.</p>
<p>If the extension element is implemented in a loosely typed scripting
language, such as JavaScript, the arguments and return value are
untyped.</p>
<p><b>Caution:</b> The value returned by an extension element is placed
in the transformation result. If you are not interested in a return
value, use a public void Java method or return null from a scripting
language function.</p>
<p>Java example: <code><font face="courier, monospaced">public void myElement</font></code><br>
<code><font face="courier, monospaced">         (org.apache.xalan.extensions.XSLProcessorContext, </font></code><br>
<code><font face="courier, monospaced">          org.apache.xalan.templates.ElemExtensionCall extensionElement)</font></code></p>
<p>JavaScript example: <code><font face="courier, monospaced">function myElement(xslProcContext, element)</font></code></p>
<p>The <a href="file:///home/mfuchs/products/kits/expanded/xalan-j_2_4_1/docs/extensionslib.html#redirect">Redirect extension</a> in the extensions library contains three extension elements.</p>
</font></td></tr></tbody></table><br>

</font></td></tr></tbody></table><br><a name="ext-functions"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Using extension functions</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
<p>Extension functions may include arguments of any type and return a value of any type.</p>
<p>XSLT recognizes five data types: node-set, result-tree-fragment,
string, boolean, and number. You can use XPath expressions to set
variables with values of these types. You can also pass literals for
string, boolean, and number arguments. If you want to pass an argument
of a type that XSLT does not recognize, use another extension function
to return an object of that type. The stylesheet that appears in <a href="#format-date-stylesheet">Formatting a date</a>,
for example uses extension functions to return a Date object and a
SimpleDateFormat object, and then uses these objects to call another
extension function.</p>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Data type mapping and method selection</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>When calling an extension function written in a language other than
Java, objects of the following Java classes will always be passed to
the extension function:</p>
  <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <tbody><tr>
      <td align="center" bgcolor="#039acc" colspan="1" rowspan="1" valign="center"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><b>XSLT Type</b> 
      </font></td>
      <td align="center" bgcolor="#039acc" colspan="1" rowspan="1" valign="center"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><b>Java Type</b> 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Node-Set 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.w3c.dom.traversal.NodeIterator 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">String 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.String 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Boolean 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.Boolean 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Number 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.Double 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Result Tree Fragment 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.w3c.dom.DocumentFragment 
      </font></td>
    </tr>
  </tbody></table>
<p>Any non-XSLT type is passed without conversion.</p>
<p>When calling an extension function written in Java, the extension
function signature can specify any of the indicated Java types, as
explained below:</p>
  <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <tbody><tr>
      <td align="center" bgcolor="#039acc" colspan="1" rowspan="1" valign="center"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><b>XSLT Type</b> 
      </font></td>
      <td align="center" bgcolor="#039acc" colspan="1" rowspan="1" valign="center"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><b>Java Types</b> 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Node-Set 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.w3c.dom.traversal.NodeIterator,
org.w3c.dom.NodeList, org.w3c.dom.Node or its subclasses,
java.lang.String, java.lang.Object, char, [double, float, long, int,
short, byte,] boolean  </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">String 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.String, java.lang.Object, char, [double, float, long, int, short, byte,] boolean 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Boolean 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">boolean, java.lang.Boolean, java.lang.Object, java.lang.String 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Number 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">double, java.lang.Double, float, long, int, short,char, byte, boolean, java.lang.String, java.lang.Object 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Result Tree Fragment 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.w3c.dom.traversal.NodeIterator,
org.w3c.dom.NodeList, org.w3c.dom.Node or its subclasses,
java.lang.String, java.lang.Object, char, [double, float, long, int,
short, byte,] boolean  </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Non-XSLT Type 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">the native type or any of its superclasses, double, float, long, int, short, char, byte, java.lang.String 
      </font></td>
    </tr>
  </tbody></table>
<p>When calling extension functions written in Java, Xalan-Java selects the method to call as follows:</p>
<ol>
  <li>Xalan-Java selects all methods whose name matches the extension function name as specified in <a href="#ext-func-calls">Extension function Java calls</a>.</li>
  <li>From this list of methods, Xalan-Java determines which methods are <i>qualified</i>.</li>
  <li>Each
qualified method is assigned a score based on the table shown above. To
assign the score to a given method, Xalan-Java examines each of the
XSLT argument types in the function invocation in the stylesheet. For
each argument, the appropriate row in the table above is selected.
Then, the corresponding Java parameter type in the method signature in
the Java program is scored. Types which appear earlier in the list are
given a higher score. That is, the list appears in order of scoring
preference from highest to lowest. Types shown in square brackets have
equal priority.</li>
  <li>The method with the highest score is invoked
after the arguments are converted to the appropriate type. If more than
one method has the highest score, an exception is thrown.</li>
</ol>
<p>Any extension function written in Java can have a first parameter of type <code><font face="courier, monospaced">org.apache.xalan.extensions.ExpressionContext</font></code>.
Any method with an ExpressionContext as the first parameter will score
higher than any method which does not have an ExpressionContext as a
first parameter.</p>
</font></td></tr></tbody></table><br>

<a name="ext-func-retval"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Return values</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>The Xalan-Java extension mechanism examines the class of the value
returned from a function and converts the value into an XSLT type
according to the following table:</p>
  <table border="0" cellpadding="2" cellspacing="2" width="100%">
    <tbody><tr>
      <td align="center" bgcolor="#039acc" colspan="1" rowspan="1" valign="center"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><b>Java Types</b> 
      </font></td>
      <td align="center" bgcolor="#039acc" colspan="1" rowspan="1" valign="center"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><b>XSLT Type</b> 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.w3c.dom.traversal.NodeIterator<br>org.apache.xml.dtm.DTM<br>org.apache.xml.dtm.DTMAxisIterator<br>org.apache.xml.dtm.DTMIterator<br>org.w3c.dom.Node 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Node-Set 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.String 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">String 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.Boolean 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Boolean 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">java.lang.Number 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Number 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.w3c.dom.DocumentFragment 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Result Tree Fragment 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">org.apache.xpath.objects.XObject 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Specified XSLT Type 
      </font></td>
    </tr>
    <tr>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">All other classes 
      </font></td>
       <td align="left" bgcolor="#a0ddf0" colspan="1" rowspan="1" valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1">Non-XSLT Type 
      </font></td>
    </tr>
  </tbody></table>
  <p>Note that the above test is applied using <code><font face="courier, monospaced">instanceof</font></code> so that any subclasses of the classes listed above will be treated the same as the listed superclass.  For example, a <code><font face="courier, monospaced">java.lang.Double</font></code> will be treated the same as a <code><font face="courier, monospaced">java.lang.Number</font></code> and will be converted to an XSLT Number.</p>
  <table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>The
return value conversion can somtimes cause confusion. For example, if
your extension function returns an object that is a subclass of
NodeIterator, that object will be converted by Xalan-Java to an XSLT
Node-Set. If you later attempt to treat that object as a non-XSLT
object of your original class and try to invoke a method on that
object, your method invocation will fail.</i></font></td></tr></tbody></table>
</font></td></tr></tbody></table><br>

<a name="ext-func-calls"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Extension function Java calls</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>The technique for instantiating Java objects and calling Java
methods depends on the format of the extension namespace that was
declared. See <a href="#java-namespace-declare">Declare the namespace</a>
for the three different formats of namespace declarations for Java
extensions. For each namespace format, the section below describes how
to instantiate an object, how to invoke an instance method, and how to
invoke a static method. The sections below explain, for each syntax,
which methods are <i>qualified</i> for method selection as described in the preceeding section.</p>
<table border="0" cellpadding="0" cellspacing="0" width="474"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="474"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="472"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="472"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="472"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Class format namespace</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="472"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="472"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="464"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br><b>To create an instance of an object</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:new (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix. A new instance is to be created with the <i>args</i> constructor arguments (if any). All constructor methods are qualified for method selection.
<br>Example: <code><font face="courier, monospaced">&lt;xsl:variable name="myType"</font></code>
<br><code><font face="courier, monospaced">       select="my-class:new()"&gt;</font></code></p>

<p><b>To invoke an instance method on a specified object</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>methodName</i> (<i>object</i>, <i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix and <i>methodName</i> is the name of the method to invoke on <i>object</i> with the <i>args</i> arguments. <i>object</i>
must be an object of the class indicated by the namespace declaration.
Otherwise, the case shown immediately below will apply. Only instance
methods with the name <i>methodName</i> are qualified methods. If a matching method is found, <i>object</i> will be used to identify the object instance and <i>args</i> will be passed to the invoked method.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="my-class:valueOf($myType, string(@population))"&gt;</font></code></p>

<p><b>To invoke an instance method on a default object</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>methodName</i> (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix and <i>methodName</i> is the name of the method to invoke with the <i>args</i> arguments. The first <i>arg</i>,
if any, must not be an object of the class indicated by the namespace
declaration. Otherwise, the case shown immediately above will apply.
Only instance methods with the name <i>methodName</i> are qualified
methods. If a matching method is found, a default instance of the class
will be created if it does not already exist.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="my-class:valueOf(string(@population))"&gt;</font></code></p>

<p><b>To invoke a static method</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>methodName</i> (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix and <i>methodName</i> is the name of the method to invoke with the <i>args</i> arguments. Only static methods with the name <i>methodName</i> are qualified methods. If a matching method is found, <i>args</i> will be passed to the invoked static method.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="my-class:printit(string(@population))"&gt;</font></code></p>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="474"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="474"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="472"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="472"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="472"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Package format namespace</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="472"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="472"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="464"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br><b>To create an instance of an object</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>subpackage</i>.<i>class</i>.new (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix, <i>subpackage</i> is the rest of the package name (the beginning of the package name was in the namespace declaration), and <i>class</i> is the name of the class. A new instance is to be created with the <i>args</i> constructor arguments (if any). All constructor methods are qualified for method selection.
<br>Example: <code><font face="courier, monospaced">&lt;xsl:variable name="myType"</font></code>
<br><code><font face="courier, monospaced">       select="my-package:extclass.new()"&gt;</font></code></p>

<p><b>To invoke an instance method on a specified instance</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>methodName</i> (<i>object</i>, <i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix and <i>methodName</i> is the name of the method to invoke on <i>object</i> with the <i>args</i> arguments. Only instance methods of the <i>object</i> with the name <i>methodName</i> are qualified methods. If a matching method is found, <i>object</i> will be used to identify the object instance and <i>args</i> will be passed to the invoked method.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="my-package:valueOf($myType, string(@population))"&gt;</font></code></p>

<p><b>To invoke a static method</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>subpackage</i>.<i>class</i>.<i>methodName</i> (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix, <i>subpackage</i> is the rest of the package name (the beginning of the package name was in the namespace declaration), <i>class</i> is the name of the class, and <i>methodName</i> is the name of the method to invoke with the <i>args</i> arguments. Only static methods with the name <i>methodName</i> are qualified methods. If a matching method is found, <i>args</i> will be passed to the invoked static method.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="my-package:extclass.printit(string(@population))"&gt;</font></code></p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>Unlike
the class format namespace, there is no concept of a default object
since the namespace declaration does not identify a unique class.</i></font></td></tr></tbody></table>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="474"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="474"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="472"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="472"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="472"><font color="#ffffff" face="arial,helvetica,sanserif" size="-1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Java format namespace</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="472"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="472"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="464"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p><br><b>To create an instance of an object</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>FQCN</i>.new (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix for the Java namespace and <i>FQCN</i> is the fully qualified class name of the class whose constructor is to be called. A new instance is to be created with the <i>args</i> constructor arguments (if any). All constructor methods are qualified for method selection.
<br>Example: <code><font face="courier, monospaced">&lt;xsl:variable name="myHash"</font></code>
<br><code><font face="courier, monospaced">       select="java:java.util.Hashtable.new()"&gt;</font></code></p>

<p><b>To invoke an instance method on a specified instance</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>methodName</i> (<i>object</i>, <i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix and <i>methodName</i> is the name of the method to invoke on <i>object</i> with the <i>args</i> arguments. Only instance methods of the <i>object</i> with the name <i>methodName</i> are qualified methods. If a matching method is found, <i>object</i> will be used to identify the object instance and <i>args</i> will be passed to the invoked method.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="java:put($myHash, string(@region), $newpop)"&gt;</font></code></p>

<p><b>To invoke a static method</b>:
<br><code><font face="courier, monospaced"><i>prefix</i>:<i>FQCN</i>.<i>methodName</i> (<i>args</i>)</font></code></p>
<p>where <i>prefix</i> is the extension namespace prefix, <i>FQCN</i> is the fully qualified class name of the class whose static method is to be called, and <i>methodName</i> is the name of the method to invoke with the <i>args</i> arguments. Only static methods with the name <i>methodName</i> are qualified methods. If a matching method is found, <i>args</i> will be passed to the invoked static method.
<br>
Example: <code><font face="courier, monospaced">&lt;xsl:variable name="new-pop"</font></code><br>
<code><font face="courier, monospaced">     select="java:java.lang.Integer.valueOf(string(@population))"&gt;</font></code></p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>Unlike
the class format namespace, there is no concept of a default object
since the namespace declaration does not identify a unique class.</i></font></td></tr></tbody></table>
</font></td></tr></tbody></table><br>
</font></td></tr></tbody></table><br>

<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Passing Nodes to java</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>Please keep in mind that <b>all</b> LocationPath expressions return
a node-set, even if the expression only returns a single attribute or a
text node (node-sets with one member). You can use the XSLT string()
function (as in the syntax examples above) to convert a node-set value
to string, and the number() function to convert a node-set value to
number (a double).</p>
<p>If you want to pass a node-set to an extension function, set up a Java method to accept an 
org.w3c.dom.NodeList (or an org.apache.xpath.NodeSet, which implements NodeList, if you want to modify the nodes).</p>
<p>Suppose, for example, you have a myExtensions.ProcessNodes class with the following doSomething method:</p>
<p><code><font face="courier, monospaced">public static boolean doSomething(org.w3c.dom.NodeList nList)</font></code></p>
<p>Assuming you set up this extension in the node-ext namespace, any of
the following extension calls from a stylesheet are syntactically
possible:</p>
<p><code><font face="courier, monospaced">&lt;!--Process the current node--&gt;</font></code><br>
<code><font face="courier, monospaced">&lt;xsl:variable name="success" select="node-ext:MyExtensions.ProcessNodes.doSomething(.)"/&gt;</font></code></p>
<p><code><font face="courier, monospaced">&lt;!--Process all nodes in current context--&gt;</font></code><br>
<code><font face="courier, monospaced">&lt;xsl:variable name="success" select="node-ext:MyExtensions.ProcessNodes.doSomething(*)"/&gt;</font></code></p>
<p><code><font face="courier, monospaced">&lt;!-- Process all nodes --&gt;</font></code><br>
<code><font face="courier, monospaced">&lt;xsl:variable name="success" select="node-ext:MyExtensions.ProcessNodes.doSomething(/*)"/&gt;</font></code></p>
<p><code><font face="courier, monospaced">&lt;!--Process the foo/baz nodes in current context --&gt;</font></code><br>
<code><font face="courier, monospaced">&lt;xsl:variable name="success" select="node-ext:MyExtensions.ProcessNodes.doSomething(foo/baz)"/&gt;</font></code></p>
<p><code><font face="courier, monospaced">&lt;!--Process the/foo/baz and /bar/saz nodes --&gt;</font></code><br>
<code><font face="courier, monospaced">&lt;xsl:variable name="success" select="node-ext:MyExtensions.ProcessNodes.doSomething(/foo/baz | /bar/saz)"/&gt;</font></code></p>
<p>The NodeList is in fact a list of references into the XML document,
so keep in mind that getNextSibling(), for example, gets you the next
sibling in the document, which must not be the next Node in the NodeList.</p>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Implementing extension functions</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>For each extension function in a namespace which is implemented in a
language other than Java, the implementation must include a method with
the following signature, or the scripting language equivalent:</p>
<p><code><font face="courier, monospaced">public <i> object function</i>(<i>args</i>)</font></code></p>
<p>where <i>object</i> is the return type, <i>function</i> is the local part of the extension function name (the function name without the namespace prefix), and <i>args</i> correspond to the arguments in the function call.</p>
<p>In addition, for extension functions implemented in Java, the
implementation may include either a Java method with the signature
shown above or one with the following signature:</p>
<p><code><font face="courier, monospaced">public <i> object function</i>(org.apache.xalan.extensions.ExpressionContext, <i>args</i>)</font></code></p>
</font></td></tr></tbody></table><br>
</font></td></tr></tbody></table><br><a name="java-namespace"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Alternative: using the abbreviated syntax for extensions implemented in Java</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
</font><p><font color="#000000" face="arial,helvetica,sanserif">For
extension functions and extension elements implemented in Java,
Xalan-Java permits an abbreviated syntax. When you use the abbreviated
syntax, you do not use an xalan:component to designate the functions.</font></p>
<p><font color="#000000" face="arial,helvetica,sanserif">The
abbreviated syntax supports the use of extension functions and
extension elements implemented in Java. You cannot use this syntax with
extensions implemented in JavaScript or another scripting language.</font></p>
<font color="#000000" face="arial,helvetica,sanserif"><a name="java-namespace-declare"><!--anchor--></a>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Declare the namespace</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>Declare the namespace for your extensions using one of the following
three formats. The technique for invoking an extension for each format
is explained in <a href="#ext-func-calls">Extension function Java calls</a>.</p>
<p><b>class format:</b> <code><font face="courier, monospaced">xmlns:my-class="xalan://<i>FQCN</i>"</font></code></p>
<p>where <i>FQCN</i> is the fully qualified class name.
<br>Examples: <code><font face="courier, monospaced">xmlns:my-class="xalan://java.util.Hashtable"</font></code>
<br>               <code><font face="courier, monospaced">xmlns:my-class="xalan://mypackage.myclass"</font></code></p>
<p><b>package format:</b> <code><font face="courier, monospaced">xmlns:my-class="xalan://<i>PJPN</i>"</font></code></p>
<p>where <i>PJPN</i> is a partial java package name.  That is, it is the beginning of or the complete name of a java package.
<br>Examples: <code><font face="courier, monospaced">xmlns:my-package="xalan://java.util"</font></code>
<br>               <code><font face="courier, monospaced">xmlns:my-package="xalan://mypackage"</font></code></p>
<p><b>Java format:</b> <code><font face="courier, monospaced">xmlns:java="http://xml.apache.org/xalan/java"</font></code></p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>The old namespace http://xml.apache.org/xslt/java is still supported for backward compatibility.</i></font></td></tr></tbody></table>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>Although
the namespace declarations for the class and package formats are shown
with the xalan:// prefix, the current implementation for those formats
will simply use the string to the right of the rightmost forward slash
as the Java class name. This format, however, is the preferred format
for extension namespace declarations.</i></font></td></tr></tbody></table>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>The class: prefix which was sometimes required in earlier versions of Xalan-Java is no longer required.</i></font></td></tr></tbody></table>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>These formats are also available when coding the src attribute of the xalan:script element as explained in <a href="#setup-script">Set up the xalan:script element</a>.</i></font></td></tr></tbody></table>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Use the namespace when you make extension calls</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
</font><p><font color="#000000" face="arial,helvetica,sanserif" size="-1">Use the declared prefix with the syntax described in <a href="#ext-func-calls">Extension function Java calls</a>.</font></p>
<p><font color="#000000" face="arial,helvetica,sanserif" size="-1">That
is all. You do not include an xalan:component element. Using the
abbreviated syntax clearly involves less setup than using the
xalan:component/xalan:script approach.</font></p>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>We
recommend that, for extensions coded in Java, the abbreviated syntax
should always be used since the xalan:component/xalan:script constructs
add no functionality.</i></font></td></tr></tbody></table>
<table border="0" cellpadding="0" cellspacing="3" width="100%"><tbody><tr><td valign="top" width="20"><img alt="Note" border="0" height="24" hspace="0" src="extensions_files/note.gif" vspace="0" width="20"></td><td valign="top"><font color="#000000" face="arial,helvetica,sanserif" size="-1"><i>The abbreviated syntax is supported in XSLTC, but the xalan:component/xalan:script constructs are not.</i></font></td></tr></tbody></table>
</td></tr></tbody></table><br><a name="ex-java-namespace"><!--anchor--></a> 
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Example: Formatting a date</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>This example uses extension functions to call the SimpleDateFormat
class and the IntDate class. IntDate uses String arguments to set up a
Date object:</p>
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>import java.util.Date;
import java.util.Calendar;

public class IntDate
{
  public static Date getDate(String year, String month, String day)
    {
      // Date(int, int, int) has been deprecated, so use Calendar to
      // set the year, month, and day.
      Calendar c = Calendar.getInstance();
      // Convert each argument to int.
      c.set ( Integer.parseInt(year),
              Integer.parseInt(month),
              Integer.parseInt(day) );
      return c.getTime();
    }
}</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
<p>The template transforms date elements with four attributes. For example, it transforms <code><font face="courier, monospaced">&lt;date format="EEEE, MMM dd, yyyy" year="2000" month="4" day="27"/&gt;</font></code> into &lt;p&gt;Date: Thursday, April 27, 2000.&lt;/p&gt;.</p>
<p>As you review this stylesheet, please keep the following in mind:</p>
 <ul>
  <li>The exclude-result-prefixes stylesheet attribute prevents the java namespace declaration from
   appearing in the output.</li>
  <li>The XSLT type returned by any LocationPath expression is node-set, so the XSLT string
    function is used to convert the format, year, month, and day attribute values from node-sets to
    strings.</li>
  <li>The format attribute provides a String argument for constructing a java.text.SimpleDateFormat
    object.</li>
    <li>The IntDate class uses String values provided by the year, month, and day attributes, to set the
    date. XSLT can pass number values, but these are converted into doubles.</li>
  <li>The formatter variable holds a SimpleDateFormat object, and the date variable holds a Date object.
    XSLT does not understand either of these types, but they are used to call the SimpleDateFormat format
     method. In that call, $formatter is the object, and $date is the argument. The syntax for calling
     Java constructors and methods is described above in <a href="#ext-func-calls">Extension function Java calls</a>.</li>    
 </ul><a name="format-date-stylesheet"><!--anchor--></a>   
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;?xml version="1.0"?&gt;
&lt;xsl:stylesheet 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    version="1.0"   
    xmlns:java="http://xml.apache.org/xalan/java"
    exclude-result-prefixes="java"&gt;
    
  &lt;!--Other templates for transforming the rest of
                                            the XML source documents--&gt;
  
  &lt;xsl:template match="date"&gt; 
    &lt;xsl:variable name="year" select="string(./@year)"/&gt;
    &lt;xsl:variable name="month" select="string(./@month)"/&gt; 
    &lt;xsl:variable name="day" select="string(./@day)"/&gt;          
    &lt;xsl:variable name="format" select="string(./@format)"/&gt;

    &lt;xsl:variable name="formatter"       
        select="java:java.text.SimpleDateFormat.new($format)"/&gt;

    &lt;xsl:variable name="date" 
        select="java:IntDate.getDate($year, $month, $day)"/&gt;

    &lt;p&gt;Date: &lt;xsl:value-of select="java:format($formatter, $date)"/&gt;&lt;/p&gt;
  &lt;/xsl:template&gt;
&lt;/xsl:stylesheet&gt;  
</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
</font></td></tr></tbody></table><br>
</font></td></tr></tbody></table><br>
<table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#666699" colspan="2" width="494"><table border="0" cellpadding="0" cellspacing="0" width="494"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="492"><font color="#ffffff" face="arial,helvetica,sanserif" size="+1"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Examples: using Java and JavaScript to implement the same extension</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="492"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="492"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="484"><font color="#000000" face="arial,helvetica,sanserif">
<p>This section contains two examples. The first example uses a Java
extension to transform a set of name elements into an alphabetical and
numbered list. The second example uses a JavaScript script to do the
same. Both examples include equivalent extension elements and an
extension function.</p>
<a name="ex-java"><!--anchor--></a> 
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>Java implementation</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p>MyCounter.java</p>
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>Import java.util.*;

public class MyCounter {
  Hashtable counters = new Hashtable ();

  public MyCounter () 
  {}

  public void init
             ( org.apache.xalan.extensions.XSLProcessorContext context,
               org.apache.xalan.templates.ElemExtensionCall extElem ) 
  {
    String name = extElem.getAttribute("name");
    String value = extElem.getAttribute("value");
    int val;
    try 
    {
      val = Integer.parseInt (value);
    } 
    catch (NumberFormatException e) 
    {
      e.printStackTrace ();
      val = 0;
    }
    counters.put (name, new Integer (val));
  }

  public int read(String name) 
  {
    Integer cval = (Integer) counters.get (name);
    return (cval == null) ? 0 : cval.intValue ();
  }

  public void incr
             ( org.apache.xalan.extensions.XSLProcessorContext context,
               org.apache.xalan.templates.ElemExtensionCall extElem) 
  {
    String name = extElem.getAttribute("name");
    Integer cval = (Integer) counters.get(name);
    int nval = (cval == null) ? 0 : (cval.intValue () + 1);
    counters.put (name, new Integer (nval));
  }
}
</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
<p>An XML source document:</p>
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;?xml version="1.0"?&gt;
&lt;doc&gt;
  &lt;name first="David" last="Marston"/&gt;
  &lt;name first="David" last="Bertoni"/&gt;
  &lt;name first="Donald" last="Leslie"/&gt;
  &lt;name first="Emily" last="Farmer"/&gt;
  &lt;name first="Jack" last="Donohue"/&gt;
  &lt;name first="Myriam" last="Midy"/&gt;
  &lt;name first="Paul" last="Dick"/&gt;
  &lt;name first="Robert" last="Weir"/&gt;
  &lt;name first="Scott" last="Boag"/&gt;
  &lt;name first="Shane" last="Curcuru"/&gt;
&lt;/doc&gt;</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
<p>The stylesheet:</p>
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;?xml version="1.0"?&gt; 
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xalan="http://xml.apache.org/xalan"
                xmlns:counter="MyCounter"
                extension-element-prefixes="counter"
                version="1.0"&gt;

  &lt;xalan:component prefix="counter"
                   elements="init incr" functions="read"&gt;
    &lt;xalan:script lang="javaclass" src="xalan://MyCounter"/&gt;
  &lt;/xalan:component&gt;

  &lt;xsl:template match="/"&gt;
    &lt;HTML&gt;
      &lt;H1&gt;Names in alphabetical order&lt;/H1&gt;
      &lt;counter:init name="index" value="1"/&gt;
      &lt;xsl:for-each select="doc/name"&gt;
        &lt;xsl:sort select="@last"/&gt;
        &lt;xsl:sort select="@first"/&gt;
        &lt;p&gt;
        &lt;xsl:text&gt;[&lt;/xsl:text&gt;
        &lt;xsl:value-of select="counter:read('index')"/&gt;
        &lt;xsl:text&gt;]. &lt;/xsl:text&gt;
        &lt;xsl:value-of select="@last"/&gt;
        &lt;xsl:text&gt;, &lt;/xsl:text&gt;
        &lt;xsl:value-of select="@first"/&gt;
        &lt;/p&gt;
        &lt;counter:incr name="index"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/HTML&gt;
  &lt;/xsl:template&gt;
 
&lt;/xsl:stylesheet&gt;
</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
<p>Transformation output:</p>
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;HTML&gt;
&lt;H1&gt;Names in alphabetical order&lt;/H1&gt;
&lt;p&gt;[1]. Bertoni, David&lt;/p&gt;
&lt;p&gt;[2]. Boag, Scott&lt;/p&gt;
&lt;p&gt;[3]. Curcuru, Shane&lt;/p&gt;
&lt;p&gt;[4]. Dick, Paul&lt;/p&gt;
&lt;p&gt;[5]. Donohue, Jack&lt;/p&gt;
&lt;p&gt;[6]. Farmer, Emily&lt;/p&gt;
&lt;p&gt;[7]. Leslie, Donald&lt;/p&gt;
&lt;p&gt;[8]. Marston, David&lt;/p&gt;
&lt;p&gt;[9]. Midy, Myriam&lt;/p&gt;
&lt;p&gt;[10]. Weir, Robert&lt;/p&gt;
&lt;/HTML&gt;</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
</font></td></tr></tbody></table><br><a name="ex-javascript"><!--anchor--></a> 
<table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#666699" colspan="2" width="484"><table border="0" cellpadding="0" cellspacing="0" width="484"><tbody><tr><td bgcolor="#039acc" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#039acc" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#039acc" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" width="482"><font color="#ffffff" face="arial,helvetica,sanserif"><img border="0" height="2" hspace="0" src="extensions_files/void.gif" vspace="0" width="2"><b>JavaScript implementation</b></font></td><td bgcolor="#017299" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#017299" height="1" width="482"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="482"></td><td bgcolor="#017299" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></td></tr><tr><td width="10"> </td><td width="474"><font color="#000000" face="arial,helvetica,sanserif" size="-1">
<p></p>
<div align="right"><table border="0" cellpadding="0" cellspacing="4" width="464"><tbody><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#ffffff" width="462"><font size="-1"><pre>&lt;?xml version="1.0"?&gt; 
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:xalan="http://xml.apache.org/xalan"
                xmlns:counter="MyCounter"
                extension-element-prefixes="counter"
                version="1.0"&gt;

  &lt;xalan:component prefix="counter"
                   elements="init incr" functions="read"&gt;
    &lt;xalan:script lang="javascript"&gt;
      var counters = new Array();

      function init (xslproc, elem) {
        name = elem.getAttribute ("name");
        value = parseInt(elem.getAttribute ("value"));
        counters[name] = value;
        return null;
      }

      function read (name) {
        // Return a string.
        return "" + (counters[name]);
      }

      function incr (xslproc, elem)
      {
        name = elem.getAttribute ("name");
        counters[name]++;
        return null;
      }
    &lt;/xalan:script&gt;
  &lt;/xalan:component&gt;

  &lt;xsl:template match="/"&gt;
    &lt;HTML&gt;
      &lt;H1&gt;Names in alphatebical order&lt;/H1&gt;
      &lt;counter:init name="index" value="1"/&gt;
      &lt;xsl:for-each select="doc/name"&gt;
        &lt;xsl:sort select="@last"/&gt;
        &lt;xsl:sort select="@first"/&gt;
        &lt;p&gt;
        &lt;xsl:text&gt;[&lt;/xsl:text&gt;
        &lt;xsl:value-of select="counter:read('index')"/&gt;
        &lt;xsl:text&gt;]. &lt;/xsl:text&gt;
        &lt;xsl:value-of select="@last"/&gt;
        &lt;xsl:text&gt;, &lt;/xsl:text&gt;
        &lt;xsl:value-of select="@first"/&gt;
        &lt;/p&gt;
        &lt;counter:incr name="index"/&gt;
      &lt;/xsl:for-each&gt;
    &lt;/HTML&gt;
  &lt;/xsl:template&gt;
 
&lt;/xsl:stylesheet&gt;
</pre></font></td><td bgcolor="#0086b2" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr><tr><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td><td bgcolor="#0086b2" height="1" width="462"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="462"></td><td bgcolor="#0086b2" height="1" width="1"><img border="0" height="1" hspace="0" src="extensions_files/void.gif" vspace="0" width="1"></td></tr></tbody></table></div>
<p>This stylesheet produces the same output as the preceding example with the Java extension.</p>
</font></td></tr></tbody></table><br>
</font></td></tr></tbody></table><br>
</td></tr></tbody></table></td></tr></tbody></table><br><table border="0" cellpadding="0" cellspacing="0" width="620"><tbody><tr><td bgcolor="#0086b2"><img height="1" src="images/dot.gif" width="1"></td></tr><tr><td align="center"><font color="#0086b2" size="-1"><i>
              Copyright © 2002 The Apache Software Foundation.
              All Rights Reserved.
            </i></font></td></tr></tbody></table></body></html>